# Digital Salary - Контекст проекта

## Что это
Калькулятор рыночной стоимости диджитал-специалистов на основе данных hh.ru

## Текущее состояние
- Проект на Next.js 14 + TypeScript + TailwindCSS
- Репозиторий: https://github.com/maisondina/digital-salary
- Локально запускается из: ~/digital-salary-new
- API hh.ru подключён (Client ID и Secret в src/lib/hhru.ts)

## Что работает
✅ Интерфейс с селекторами профессии и города
✅ Карточки навыков со звёздочками (клик работает стабильно)
✅ Автопересчёт зарплаты в реальном времени
✅ "Вся Россия" вместо "Удалённо"
✅ Базовый сбор данных с API hh.ru (100 вакансий)
✅ Код на GitHub синхронизирован

## Что нужно доделать
❌ Сбор ВСЕХ вакансий (сейчас только 100, нужно все активные)
❌ Фильтрация мусорных вакансий (агентства, без зарплаты, старые, archived)
❌ 10 навыков вместо 4 (на основе реальных данных из вакансий)
❌ Правильный расчёт по регионам (собирать отдельно, считать медианы, не коэффициенты)
❌ Правильная формула влияния навыка: медиана(с навыком) - медиана(без навыка)
❌ Правильная обработка зарплатных вилок: from + (to-from)*0.35
❌ Страницы "О проекте" и "Автор" с готовыми текстами
❌ Попапы онбординга рядом с элементами (не в центре)

## Структура проекта
```
digital-salary-new/
├── src/
│   ├── app/
│   │   ├── page.tsx          # Главная страница
│   │   ├── layout.tsx
│   │   └── globals.css
│   ├── data/
│   │   └── copywriter.json   # Данные о навыках
│   ├── lib/
│   │   └── hhru.ts          # API hh.ru
│   └── scripts/
│       └── updateData.ts     # Сбор данных
├── package.json
└── README.md
```

## Команды для работы
```bash
cd ~/digital-salary-new
npm run dev                 # Запуск локально
npm run update-data        # Сбор данных с hh.ru
git pull origin main       # Обновить код с GitHub
git push origin main       # Залить изменения
```

## Текущие проблемы и их причины

### Проблема 1: analyzeSkills находит 0 навыков
**Причина:** Неправильно парсятся key_skills из API
**Решение:** Нужно проверить структуру данных и правильно извлекать навыки

### Проблема 2: Собирается только 100 вакансий
**Причина:** Нет pagination, берётся только первая страница
**Решение:** Делать запросы пока page < pages из ответа API

### Проблема 3: Нет фильтрации мусора
**Причина:** Не реализована функция filterVacancies
**Решение:** Исключать archived, агентства, без зарплаты, старые >90 дней

### Проблема 4: Неправильный расчёт по регионам
**Причина:** Используются коэффициенты вместо реальных данных
**Решение:** Собирать вакансии отдельно для каждого региона и считать медианы

## Методология расчёта (правильная)

### Сбор данных:
1. Запросить ВСЕ вакансии по профессии (с pagination)
2. Фильтровать мусор
3. Собрать отдельно для Москвы (area=1), СПб (area=2), всей России (без area)

### Обработка зарплат:
Если from и to: salary = from + (to - from) * 0.35
Если только from: salary = from * 1.25
Если только to: пропустить

### Расчёт по регионам:
Для каждого региона: медиана(все зарплаты в регионе)
НЕ базовая * коэффициент!

### Анализ навыков:
Извлечь все key_skills из вакансий
Посчитать частоту каждого
Взять топ-10 (минимум в 30+ вакансиях)
Для каждого навыка:

medianWith = медиана(зарплаты С навыком)
medianWithout = медиана(зарплаты БЕЗ навыка)
salary_impact = medianWith - medianWithout



## API hh.ru

### Credentials:
- Client ID: L3CLEES8LPH30SES0R0AMTJQ3NC7AIF97O1VTCG5UDE1K2AHF7TTS6F1IU8JFCFG
- Client Secret: H5K7T7P2G8CBCA9D4U072VAV1MA3LMJ91DF2VAAQIEHCQL94VI37NQA78FRMMIAF

### Важные параметры:
- text: название профессии
- area: код региона (1=Москва, 2=СПб, 113=Россия)
- only_with_salary: true
- period: 30 (актуальные за месяц)
- per_page: 100 (максимум за запрос)

## Автор проекта
Дина Майсон
- UX-редактор, фрилансер
- Telegram: @maisondina
- Канал: "Текст готов" https://t.me/+ZY7Np9Z9M95kMmY6

## История работы
Проект создан полностью в диалоге с Claude (Anthropic). Дина не умеет программировать, но смогла создать рабочий веб-сервис благодаря AI-ассистенту. Весь код написан Claude по техническому заданию и требованиям от Дины.
